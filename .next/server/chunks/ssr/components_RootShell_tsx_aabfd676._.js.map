{"version":3,"sources":["../../../../components/boot/BootLoader.tsx","../../../../components/RootShell.tsx","../../../../node_modules/framer-motion/src/components/AnimatePresence/utils.ts","../../../../node_modules/framer-motion/src/utils/use-composed-ref.ts","../../../../node_modules/framer-motion/src/components/AnimatePresence/PresenceChild.tsx","../../../../node_modules/framer-motion/src/components/AnimatePresence/PopChild.tsx","../../../../node_modules/framer-motion/src/components/AnimatePresence/index.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { AnimatePresence, motion } from \"framer-motion\";\n\ninterface BootLoaderProps {\n  onComplete: () => void;\n}\n\n// Static hex lines to keep SSR and client renders identical.\n// Visual noise is preserved without runtime randomness.\nconst HEX_LINES = [\n  \"E5A7E67CF31888AC622D34E9\",\n  \"A1671E5926375E65F66352CA\",\n  \"9B3C7A12F4D8610E2C7B9F3D\",\n  \"7FC2A9D1846B3E5F2A9C7D1E\",\n  \"3D9F6A5C2E7B1A8D4C6F2B9E\",\n  \"F1A3C79E5D2B8460C7E9A3F1\",\n  \"2B7E5C9A1D4F8E6A3C9B7D2F\",\n  \"C8F2A1D7E4B9630F1A7C9E3B\",\n  \"6A3D9F2C7E1B5D8C4A9F2E7B\",\n  \"D1F7A9C3E5B2846F0A3D7C9E\",\n  \"4E9B2C7A1F5D8E3C6A9B2F7D\",\n  \"B3E7C1A9D5F2846C0E3A7D9F\",\n];\n\nexport function BootLoader({ onComplete }: BootLoaderProps) {\n  const [progress, setProgress] = useState(0);\n\n  const handleSkip = () => {\n    onComplete();\n  };\n\n  useEffect(() => {\n    let frame: number;\n    const start = performance.now();\n    const duration = 2200;\n\n    const loop = (now: number) => {\n      const t = Math.min(1, (now - start) / duration);\n      const eased = t; // linear, mechanical\n      const value = Math.round(eased * 100);\n      setProgress(value);\n\n      if (t < 1) {\n        frame = requestAnimationFrame(loop);\n      } else {\n        // small delay for glitch exit\n        setTimeout(() => {\n          onComplete();\n        }, 400);\n      }\n    };\n\n    frame = requestAnimationFrame(loop);\n    return () => cancelAnimationFrame(frame);\n  }, [onComplete]);\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        className=\"fixed inset-0 z-50 flex items-center justify-center bg-black\"\n        initial={{ opacity: 1 }}\n        exit={{\n          opacity: 0,\n          transition: { duration: 0.45, ease: \"linear\" },\n        }}\n      >\n        {/* Vertical split mask for subtle curtain effect */}\n        <div className=\"pointer-events-none absolute inset-0 flex\">\n          <motion.div\n            className=\"h-full w-1/2 bg-black\"\n            initial={{ x: 0 }}\n            animate={{ x: \"-10%\" }}\n            transition={{ duration: 0.8, ease: \"linear\" }}\n          />\n          <motion.div\n            className=\"h-full w-1/2 bg-black\"\n            initial={{ x: 0 }}\n            animate={{ x: \"10%\" }}\n            transition={{ duration: 0.8, ease: \"linear\" }}\n          />\n        </div>\n\n        <div className=\"relative z-10 flex max-w-md flex-col items-center gap-6 px-6\">\n          <div className=\"grid-border w-full border border-zinc-900 bg-black/80 p-4\">\n            <div className=\"mb-3 text-center font-mono text-[11px] tracking-[0.25em] text-zinc-400\">\n              DIGIPEAK // SYSTEM BOOT\n            </div>\n            <div className=\"h-40 overflow-hidden bg-black/80\">\n              <motion.div\n                className=\"flex flex-col gap-1 font-mono text-[10px] leading-tight text-zinc-500\"\n                animate={{ y: [\"0%\", \"-25%\"] }}\n                transition={{\n                  duration: 2.2,\n                  ease: \"linear\",\n                  repeat: Infinity,\n                }}\n              >\n                {HEX_LINES.map((line, i) => (\n                  <div key={i} className=\"flex justify-center gap-2\">\n                    <span className=\"text-red-600\">0x</span>\n                    <span>{line}</span>\n                  </div>\n                ))}\n              </motion.div>\n            </div>\n          </div>\n\n          <div className=\"w-full\">\n            <div className=\"mb-1 flex items-center justify-between font-mono text-[11px] uppercase tracking-[0.18em] text-zinc-500\">\n              <span>SYSTEM_INITIALIZING...</span>\n              <span className=\"text-red-600\">[{progress}%]</span>\n            </div>\n            <div className=\"h-[2px] w-full overflow-hidden bg-zinc-900\">\n              <motion.div\n                className=\"h-full bg-red-600 shadow-red-glow\"\n                initial={{ width: \"0%\" }}\n                animate={{ width: `${progress}%` }}\n                transition={{ duration: 0.2, ease: \"linear\" }}\n              />\n            </div>\n            <button\n              type=\"button\"\n              onClick={handleSkip}\n              className=\"mt-3 flex w-full items-center justify-between font-mono text-[10px] uppercase tracking-[0.18em] text-zinc-600 hover:text-red-500\"\n            >\n              <span>MANUAL OVERRIDE AVAILABLE</span>\n              <span className=\"text-red-600 hover:text-red-400\">\n                CLICK TO SKIP BOOT\n              </span>\n            </button>\n          </div>\n        </div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n\n","\"use client\";\n\nimport { useState } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { BootLoader } from \"./boot/BootLoader\";\n\nexport function RootShell({ children }: { children: React.ReactNode }) {\n  const [bootComplete, setBootComplete] = useState(false);\n\n  return (\n    <div className=\"min-h-screen bg-black text-white\">\n      <AnimatePresence>\n        {!bootComplete && (\n          <BootLoader onComplete={() => setBootComplete(true)} />\n        )}\n      </AnimatePresence>\n\n      <div className=\"relative flex min-h-screen flex-col\">\n        {/* HUD Navigation */}\n        <motion.header\n          className=\"fixed inset-x-0 top-0 z-30 border-b border-zinc-900/80 bg-black/80 backdrop-blur-sm\"\n          initial={{ y: -40, opacity: 0 }}\n          animate={{ y: 0, opacity: 1 }}\n          transition={{ duration: 0.4, ease: \"linear\" }}\n        >\n          <div className=\"mx-auto flex max-w-6xl items-center justify-between px-6 py-3 text-sm md:text-base tracking-[0.22em]\">\n            <div className=\"font-mono uppercase text-zinc-200\">\n              DIGIPEAK // OPS-HUD\n            </div>\n            <nav className=\"flex gap-6 font-mono text-xs md:text-sm uppercase\">\n              {[\n                { label: \"SYS_GO\", href: \"/\" },\n                { label: \"PRJ_CL\", href: \"/prj-cl\" },\n                { label: \"LOG_3DS\", href: \"/prj-3ds\" },\n              ].map((item) => (\n                <a\n                  key={item.label}\n                  href={item.href}\n                  className=\"relative overflow-hidden text-zinc-400 transition-colors duration-150\"\n                >\n                  <span className=\"group inline-flex items-center gap-1\">\n                    <span className=\"mr-1 text-red-600 opacity-0 transition-opacity duration-150 group-hover:opacity-100\">\n                      [\n                    </span>\n                    <span className=\"group-hover:text-red-600\">\n                      {item.label}\n                    </span>\n                    <span className=\"ml-1 text-red-600 opacity-0 transition-opacity duration-150 group-hover:opacity-100\">\n                      ]\n                    </span>\n                  </span>\n                </a>\n              ))}\n            </nav>\n          </div>\n        </motion.header>\n\n        {/* Main content */}\n        <main className=\"mx-auto flex w-full max-w-6xl flex-1 flex-col px-6 pt-20 pb-10 text-sm md:text-base md:pt-24\">\n          {children}\n        </main>\n\n        {/* Status Footer */}\n        <footer className=\"border-t border-zinc-900 bg-black/90\">\n          <div className=\"mx-auto grid max-w-6xl grid-cols-1 gap-4 px-6 py-4 text-xs md:text-sm font-mono uppercase text-zinc-500 md:grid-cols-3\">\n            <div className=\"grid-border flex items-center border-r border-zinc-900/60 pr-4\">\n              <span className=\"text-zinc-400\">COORDS:</span>\n              <span className=\"ml-2 text-zinc-200\">\n                NANG LAE, CHIANG RAI\n              </span>\n            </div>\n            <div className=\"grid-border flex items-center border-r border-zinc-900/60 pr-4\">\n              <span className=\"mr-2 status-dot\" />\n              <span className=\"text-zinc-400\">STATUS:</span>\n              <span className=\"ml-2 text-red-600\">SYSTEM_ARMED</span>\n            </div>\n            <div className=\"flex flex-col justify-center gap-1 md:items-end\">\n              <div className=\"text-zinc-400\">\n                © 202X DIGIPEAK OPS. ALL SYSTEMS HARDENED.\n              </div>\n              <div className=\"text-[10px] md:text-xs normal-case text-zinc-500\">\n                237/4 หมู่ 5 ตำบล ริมกก อำเภอ เมืองเชียงราย จังหวัด เชียงราย 57100\n              </div>\n              <div className=\"flex flex-wrap items-center gap-3 text-[10px] md:text-xs normal-case text-zinc-500\">\n                <span>email: digipeak.co@gmail.com</span>\n                <span className=\"hidden text-zinc-700 md:inline\">|</span>\n                <nav className=\"flex gap-3 uppercase\">\n                  <a\n                    href=\"/privacy\"\n                    className=\"text-zinc-500 hover:text-red-600\"\n                  >\n                    PRIVACY\n                  </a>\n                  <a href=\"/tos\" className=\"text-zinc-500 hover:text-red-600\">\n                    TOS\n                  </a>\n                </nav>\n              </div>\n            </div>\n          </div>\n        </footer>\n      </div>\n    </div>\n  );\n}\n\n","import { isValidElement, Children, ReactElement, ReactNode } from \"react\"\n\nexport type ComponentKey = string | number\n\nexport const getChildKey = (child: ReactElement<any>): ComponentKey =>\n    child.key || \"\"\n\nexport function onlyElements(children: ReactNode): ReactElement<any>[] {\n    const filtered: ReactElement<any>[] = []\n\n    // We use forEach here instead of map as map mutates the component key by preprending `.$`\n    Children.forEach(children, (child) => {\n        if (isValidElement(child)) filtered.push(child)\n    })\n\n    return filtered\n}\n","/**\n * Taken from https://github.com/radix-ui/primitives/blob/main/packages/react/compose-refs/src/compose-refs.tsx\n */\nimport * as React from \"react\"\n\ntype PossibleRef<T> = React.Ref<T> | undefined\n\n/**\n * Set a given ref to a given value\n * This utility takes care of different types of refs: callback refs and RefObject(s)\n */\nfunction setRef<T>(ref: PossibleRef<T>, value: T): void | (() => void) {\n    if (typeof ref === \"function\") {\n        return ref(value)\n    } else if (ref !== null && ref !== undefined) {\n        ;(ref as React.MutableRefObject<T>).current = value\n    }\n}\n\n/**\n * A utility to compose multiple refs together\n * Accepts callback refs and RefObject(s)\n */\nfunction composeRefs<T>(...refs: PossibleRef<T>[]): React.RefCallback<T> {\n    return (node) => {\n        let hasCleanup = false\n        const cleanups = refs.map((ref) => {\n            const cleanup = setRef(ref, node)\n            if (!hasCleanup && typeof cleanup === \"function\") {\n                hasCleanup = true\n            }\n            return cleanup\n        })\n        // React <19 will log an error to the console if a callback ref returns a\n        // value. We don't use ref cleanups internally so this will only happen if a\n        // user's ref callback returns a value, which we only expect if they are\n        // using the cleanup functionality added in React 19.\n        if (hasCleanup) {\n            return () => {\n                for (let i = 0; i < cleanups.length; i++) {\n                    const cleanup = cleanups[i]\n                    if (typeof cleanup === \"function\") {\n                        cleanup()\n                    } else {\n                        setRef(refs[i], null)\n                    }\n                }\n            }\n        }\n    }\n}\n\n/**\n * A custom hook that composes multiple refs\n * Accepts callback refs and RefObject(s)\n */\nfunction useComposedRefs<T>(...refs: PossibleRef<T>[]): React.RefCallback<T> {\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    return React.useCallback(composeRefs(...refs), refs)\n}\n\nexport { useComposedRefs }\n","\"use client\"\n\nimport * as React from \"react\"\nimport { useId, useMemo } from \"react\"\nimport {\n    PresenceContext,\n    type PresenceContextProps,\n} from \"../../context/PresenceContext\"\nimport { VariantLabels } from \"../../motion/types\"\nimport { useConstant } from \"../../utils/use-constant\"\nimport { PopChild } from \"./PopChild\"\n\ninterface PresenceChildProps {\n    children: React.ReactElement\n    isPresent: boolean\n    onExitComplete?: () => void\n    initial?: false | VariantLabels\n    custom?: any\n    presenceAffectsLayout: boolean\n    mode: \"sync\" | \"popLayout\" | \"wait\"\n    anchorX?: \"left\" | \"right\"\n    anchorY?: \"top\" | \"bottom\"\n    root?: HTMLElement | ShadowRoot\n}\n\nexport const PresenceChild = ({\n    children,\n    initial,\n    isPresent,\n    onExitComplete,\n    custom,\n    presenceAffectsLayout,\n    mode,\n    anchorX,\n    anchorY,\n    root\n}: PresenceChildProps) => {\n    const presenceChildren = useConstant(newChildrenMap)\n    const id = useId()\n\n    let isReusedContext = true\n    let context = useMemo((): PresenceContextProps => {\n        isReusedContext = false\n        return {\n            id,\n            initial,\n            isPresent,\n            custom,\n            onExitComplete: (childId: string) => {\n                presenceChildren.set(childId, true)\n\n                for (const isComplete of presenceChildren.values()) {\n                    if (!isComplete) return // can stop searching when any is incomplete\n                }\n\n                onExitComplete && onExitComplete()\n            },\n            register: (childId: string) => {\n                presenceChildren.set(childId, false)\n                return () => presenceChildren.delete(childId)\n            },\n        }\n    }, [isPresent, presenceChildren, onExitComplete])\n\n    /**\n     * If the presence of a child affects the layout of the components around it,\n     * we want to make a new context value to ensure they get re-rendered\n     * so they can detect that layout change.\n     */\n    if (presenceAffectsLayout && isReusedContext) {\n        context = { ...context }\n    }\n\n    useMemo(() => {\n        presenceChildren.forEach((_, key) => presenceChildren.set(key, false))\n    }, [isPresent])\n\n    /**\n     * If there's no `motion` components to fire exit animations, we want to remove this\n     * component immediately.\n     */\n    React.useEffect(() => {\n        !isPresent &&\n            !presenceChildren.size &&\n            onExitComplete &&\n            onExitComplete()\n    }, [isPresent])\n\n    children = (\n        <PopChild pop={mode === \"popLayout\"} isPresent={isPresent} anchorX={anchorX} anchorY={anchorY} root={root}>\n            {children}\n        </PopChild>\n    )\n\n    return (\n        <PresenceContext.Provider value={context}>\n            {children}\n        </PresenceContext.Provider>\n    )\n}\n\nfunction newChildrenMap(): Map<string, boolean> {\n    return new Map()\n}\n","\"use client\"\n\nimport { isHTMLElement } from \"motion-dom\"\nimport * as React from \"react\"\nimport { useContext, useId, useInsertionEffect, useRef } from \"react\"\n\nimport { MotionConfigContext } from \"../../context/MotionConfigContext\"\nimport { useComposedRefs } from \"../../utils/use-composed-ref\"\n\ninterface Size {\n    width: number\n    height: number\n    top: number\n    left: number\n    right: number\n    bottom: number\n}\n\ninterface Props {\n    children: React.ReactElement\n    isPresent: boolean\n    anchorX?: \"left\" | \"right\"\n    anchorY?: \"top\" | \"bottom\"\n    root?: HTMLElement | ShadowRoot\n    pop?: boolean\n}\n\ninterface MeasureProps extends Props {\n    childRef: React.RefObject<HTMLElement | null>\n    sizeRef: React.RefObject<Size>\n}\n\n/**\n * Measurement functionality has to be within a separate component\n * to leverage snapshot lifecycle.\n */\nclass PopChildMeasure extends React.Component<MeasureProps> {\n    getSnapshotBeforeUpdate(prevProps: MeasureProps) {\n        const element = this.props.childRef.current\n        if (element && prevProps.isPresent && !this.props.isPresent && this.props.pop !== false) {\n            const parent = element.offsetParent\n            const parentWidth = isHTMLElement(parent)\n                ? parent.offsetWidth || 0\n                : 0\n            const parentHeight = isHTMLElement(parent)\n                ? parent.offsetHeight || 0\n                : 0\n\n            const size = this.props.sizeRef.current!\n            size.height = element.offsetHeight || 0\n            size.width = element.offsetWidth || 0\n            size.top = element.offsetTop\n            size.left = element.offsetLeft\n            size.right = parentWidth - size.width - size.left\n            size.bottom = parentHeight - size.height - size.top\n        }\n\n        return null\n    }\n\n    /**\n     * Required with getSnapshotBeforeUpdate to stop React complaining.\n     */\n    componentDidUpdate() {}\n\n    render() {\n        return this.props.children\n    }\n}\n\nexport function PopChild({ children, isPresent, anchorX, anchorY, root, pop }: Props) {\n    const id = useId()\n    const ref = useRef<HTMLElement>(null)\n    const size = useRef<Size>({\n        width: 0,\n        height: 0,\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n    })\n    const { nonce } = useContext(MotionConfigContext)\n    /**\n     * In React 19, refs are passed via props.ref instead of element.ref.\n     * We check props.ref first (React 19) and fall back to element.ref (React 18).\n     */\n    const childRef =\n        (children.props as { ref?: React.Ref<HTMLElement> })?.ref ??\n        (children as unknown as { ref?: React.Ref<HTMLElement> })?.ref\n    const composedRef = useComposedRefs(ref, childRef)\n\n    /**\n     * We create and inject a style block so we can apply this explicit\n     * sizing in a non-destructive manner by just deleting the style block.\n     *\n     * We can't apply size via render as the measurement happens\n     * in getSnapshotBeforeUpdate (post-render), likewise if we apply the\n     * styles directly on the DOM node, we might be overwriting\n     * styles set via the style prop.\n     */\n    useInsertionEffect(() => {\n        const { width, height, top, left, right, bottom } = size.current\n        if (isPresent || pop === false || !ref.current || !width || !height) return\n\n        const x = anchorX === \"left\" ? `left: ${left}` : `right: ${right}`\n        const y = anchorY === \"bottom\" ? `bottom: ${bottom}` : `top: ${top}`\n\n        ref.current.dataset.motionPopId = id\n\n        const style = document.createElement(\"style\")\n        if (nonce) style.nonce = nonce\n\n        const parent = root ?? document.head\n        parent.appendChild(style)\n\n        if (style.sheet) {\n            style.sheet.insertRule(`\n          [data-motion-pop-id=\"${id}\"] {\n            position: absolute !important;\n            width: ${width}px !important;\n            height: ${height}px !important;\n            ${x}px !important;\n            ${y}px !important;\n          }\n        `)\n        }\n\n        return () => {\n            if (parent.contains(style)) {\n                parent.removeChild(style)\n            }\n        }\n    }, [isPresent])\n\n    return (\n        <PopChildMeasure isPresent={isPresent} childRef={ref} sizeRef={size} pop={pop}>\n            {pop === false\n                ? children\n                : React.cloneElement(children as any, { ref: composedRef })}\n        </PopChildMeasure>\n    )\n}\n","\"use client\"\n\nimport * as React from \"react\"\nimport { useContext, useMemo, useRef, useState } from \"react\"\nimport { LayoutGroupContext } from \"../../context/LayoutGroupContext\"\nimport { useConstant } from \"../../utils/use-constant\"\nimport { useIsomorphicLayoutEffect } from \"../../utils/use-isomorphic-effect\"\nimport { PresenceChild } from \"./PresenceChild\"\nimport { AnimatePresenceProps } from \"./types\"\nimport { usePresence } from \"./use-presence\"\nimport { ComponentKey, getChildKey, onlyElements } from \"./utils\"\n\n/**\n * `AnimatePresence` enables the animation of components that have been removed from the tree.\n *\n * When adding/removing more than a single child, every child **must** be given a unique `key` prop.\n *\n * Any `motion` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { motion, AnimatePresence } from 'framer-motion'\n *\n * export const Items = ({ items }) => (\n *   <AnimatePresence>\n *     {items.map(item => (\n *       <motion.div\n *         key={item.id}\n *         initial={{ opacity: 0 }}\n *         animate={{ opacity: 1 }}\n *         exit={{ opacity: 0 }}\n *       />\n *     ))}\n *   </AnimatePresence>\n * )\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * If a child contains multiple `motion` components with `exit` props, it will only unmount the child\n * once all `motion` components have finished animating out. Likewise, any components using\n * `usePresence` all need to call `safeToRemove`.\n *\n * @public\n */\nexport const AnimatePresence = ({\n    children,\n    custom,\n    initial = true,\n    onExitComplete,\n    presenceAffectsLayout = true,\n    mode = \"sync\",\n    propagate = false,\n    anchorX = \"left\",\n    anchorY = \"top\",\n    root\n}: React.PropsWithChildren<AnimatePresenceProps>) => {\n    const [isParentPresent, safeToRemove] = usePresence(propagate)\n\n    /**\n     * Filter any children that aren't ReactElements. We can only track components\n     * between renders with a props.key.\n     */\n    const presentChildren = useMemo(() => onlyElements(children), [children])\n\n    /**\n     * Track the keys of the currently rendered children. This is used to\n     * determine which children are exiting.\n     */\n    const presentKeys =\n        propagate && !isParentPresent ? [] : presentChildren.map(getChildKey)\n\n    /**\n     * If `initial={false}` we only want to pass this to components in the first render.\n     */\n    const isInitialRender = useRef(true)\n\n    /**\n     * A ref containing the currently present children. When all exit animations\n     * are complete, we use this to re-render the component with the latest children\n     * *committed* rather than the latest children *rendered*.\n     */\n    const pendingPresentChildren = useRef(presentChildren)\n\n    /**\n     * Track which exiting children have finished animating out.\n     */\n    const exitComplete = useConstant(() => new Map<ComponentKey, boolean>())\n\n    /**\n     * Track which components are currently processing exit to prevent duplicate processing.\n     */\n    const exitingComponents = useRef(new Set<ComponentKey>())\n\n    /**\n     * Save children to render as React state. To ensure this component is concurrent-safe,\n     * we check for exiting children via an effect.\n     */\n    const [diffedChildren, setDiffedChildren] = useState(presentChildren)\n    const [renderedChildren, setRenderedChildren] = useState(presentChildren)\n\n    useIsomorphicLayoutEffect(() => {\n        isInitialRender.current = false\n        pendingPresentChildren.current = presentChildren\n\n        /**\n         * Update complete status of exiting children.\n         */\n        for (let i = 0; i < renderedChildren.length; i++) {\n            const key = getChildKey(renderedChildren[i])\n\n            if (!presentKeys.includes(key)) {\n                if (exitComplete.get(key) !== true) {\n                    exitComplete.set(key, false)\n                }\n            } else {\n                exitComplete.delete(key)\n                exitingComponents.current.delete(key)\n            }\n        }\n    }, [renderedChildren, presentKeys.length, presentKeys.join(\"-\")])\n\n    const exitingChildren: any[] = []\n\n    if (presentChildren !== diffedChildren) {\n        let nextChildren = [...presentChildren]\n\n        /**\n         * Loop through all the currently rendered components and decide which\n         * are exiting.\n         */\n        for (let i = 0; i < renderedChildren.length; i++) {\n            const child = renderedChildren[i]\n            const key = getChildKey(child)\n\n            if (!presentKeys.includes(key)) {\n                nextChildren.splice(i, 0, child)\n                exitingChildren.push(child)\n            }\n        }\n\n        /**\n         * If we're in \"wait\" mode, and we have exiting children, we want to\n         * only render these until they've all exited.\n         */\n        if (mode === \"wait\" && exitingChildren.length) {\n            nextChildren = exitingChildren\n        }\n\n        setRenderedChildren(onlyElements(nextChildren))\n        setDiffedChildren(presentChildren)\n\n        /**\n         * Early return to ensure once we've set state with the latest diffed\n         * children, we can immediately re-render.\n         */\n        return null\n    }\n\n    if (\n        process.env.NODE_ENV !== \"production\" &&\n        mode === \"wait\" &&\n        renderedChildren.length > 1\n    ) {\n        console.warn(\n            `You're attempting to animate multiple children within AnimatePresence, but its mode is set to \"wait\". This will lead to odd visual behaviour.`\n        )\n    }\n\n    /**\n     * If we've been provided a forceRender function by the LayoutGroupContext,\n     * we can use it to force a re-render amongst all surrounding components once\n     * all components have finished animating out.\n     */\n    const { forceRender } = useContext(LayoutGroupContext)\n\n    return (\n        <>\n            {renderedChildren.map((child) => {\n                const key = getChildKey(child)\n\n                const isPresent =\n                    propagate && !isParentPresent\n                        ? false\n                        : presentChildren === renderedChildren ||\n                          presentKeys.includes(key)\n\n                const onExit = () => {\n                    if (exitingComponents.current.has(key)) {\n                        return\n                    }\n                    exitingComponents.current.add(key)\n\n                    if (exitComplete.has(key)) {\n                        exitComplete.set(key, true)\n                    } else {\n                        return\n                    }\n\n                    let isEveryExitComplete = true\n                    exitComplete.forEach((isExitComplete) => {\n                        if (!isExitComplete) isEveryExitComplete = false\n                    })\n\n                    if (isEveryExitComplete) {\n                        forceRender?.()\n                        setRenderedChildren(pendingPresentChildren.current)\n\n                        propagate && safeToRemove?.()\n\n                        onExitComplete && onExitComplete()\n                    }\n                }\n\n                return (\n                    <PresenceChild\n                        key={key}\n                        isPresent={isPresent}\n                        initial={\n                            !isInitialRender.current || initial\n                                ? undefined\n                                : false\n                        }\n                        custom={custom}\n                        presenceAffectsLayout={presenceAffectsLayout}\n                        mode={mode}\n                        root={root}\n                        onExitComplete={isPresent ? undefined : onExit}\n                        anchorX={anchorX}\n                        anchorY={anchorY}\n                    >\n                        {child}\n                    </PresenceChild>\n                )\n            })}\n        </>\n    )\n}\n"],"names":[],"mappings":"wDCEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,iGEQS,EAAU,CAAmB,CAAE,CAAQ,EAAA,GACzB,UAAU,EAAzB,AAA2B,OAA3B,EACA,OAAO,EAAI,KAAK,CAAC,GACV,GAAG,GAC0B,EADrB,KAC4B,CAAG,CAAA,CAEtD,AAH+B,CAG9B,EAHiC,gBAAgB,UEuB9C,wBAAA,CAAA,CAAA,iJAKY,EAAA,WAAA,EAAA,wNAeR,OAAA,KAKD,oBAAA,CAAA,sCAQS,SAAA,EAAA,UAAA,CAAA,CAAA,UAAA,CAAA,CAAA,QAAA,CAAA,CAAA,QAAA,CAAA,CAAA,KAAA,CAAA,CAAA,IAAA,CAAA,CAAA,2DAIR,MAAA,EACA,OAAA,EACA,IAAA,yBAIH,gEFxBI,AAAmB,GAAG,CAAA,EAE3B,OAAO,EAAK,GAAA,QAAY,CAAC,AAnC7B,SAAS,EAmC+B,CAAC,AAnChC,CAAwC,EAC7C,OAAO,AAAC,IAAI,AACR,IAAA,EAAA,CAAA,EACM,EAAW,EAAK,GAAG,CAAA,AAAE,GAAG,CAC1B,IAAM,AADwB,EACd,EAAO,EAAK,CAAF,EAI1B,OAHA,GAAsC,AAAtC,YAAkD,AAAlD,OAA0B,GACtB,IAAa,CAAA,EAEV,CACX,CAAC,CAAC,CAAA,AAKF,GAAI,EACA,MAAO,IADK,CAER,IAAK,IAAI,CAAC,CAAA,EAAM,EAAI,EAAS,MAAM,AAAP,CAAS,CAAC,EAAE,CAAE,CACtC,IAAM,EAAU,CAAQ,CAAC,CAAC,CAAC,CAAA,AACJ,YAAY,OAAxB,QAGA,CAAA,CAAK,EAAE,CAAE,aAcI,GAAO,CAAH,CAAC,EAAM,CAAC,CAAA,4BEyCjD,CAAA,EAAA,EAAA,kBAAA,EAAA,KAEC,GAAA,OAAA,CAAA,QAAA,CAAA,KAAA,CAAA,MAAA,CAAA,OAAA,CAAA,CAAA,QAAA,CAAA,CAAA,EAAA,OAAA,CACA,GAAA,IAAA,IAAA,GAAA,CAAA,EAAA,OAAA,EAAA,CAAA,GAAA,CAAA,EAAA,mDAGA,EAAA,WAAA,EAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,CAAA,KAAA,EAAA,EAAA,CAAA,uEAKA,IAAW,EAAA,KAAA,CAAA,CAAA,EAEX,IAAA,EAAA,GAAA,SAAA,IAAA,CAeA;;;;;;;;QAHC,CAAA,EAGD,oCAIA,CACJ,EAAA,CAAA,EAAA,wGD3GS,EAAA,CAAA,CAAA,SAAA,CAAA,CAAA,QAAA,CAAA,CAAA,UAAA,CAAA,CAAA,eAAA,CAAA,CAAA,OAAA,CAAA,CAAA,sBAAA,CAAA,CAAA,KAAA,CAAA,CAAA,QAAA,CAAA,CAAA,QAAA,CAAA,CAAA,KAAA,CAAA,CAAA,oDAgBT,EAAA,CAAA,EAAA,EAAA,OAAA,EAAA,+CAOQ,eAAA,8DASA,SAAA,oHAkBR,EAAA,CAAA,EAAA,kCAUQ,8MFjFC,EAAe,AAAD,GACvB,EADgD,AAC1C,GAAD,AAAI,CADW,CACP,GAAE,AAEb,SAAU,EAAa,CAAmB,EAAA,AAC5C,IAAM,EAAgC,CADd,CACgB,CAAA,GAA1B,IAGd,EAAA,QAAQ,CAAC,OAAO,CAAC,EAAU,AAAC,OACpB,EAAA,cAAA,AAAc,EAAC,IAAQ,CAAH,CAAY,AAAX,IAAW,CAAK,CAAN,CACvC,GADkD,AAG3C,CAH4C,AAIvD,CI4BG,IAAA,EAAA,CAAA,CAAA,SAAA,CAAA,CAAA,OAAA,CAAA,CAAA,QAAA,EAAA,CAAA,CAAA,CAAA,eAAA,CAAA,CAAA,sBAAA,EAAA,CAAA,CAAA,CAAA,KAAA,EAAA,MAAA,CAAA,UAAA,EAAA,CAAA,CAAA,CAAA,QAAA,EAAA,MAAA,CAAA,QAAA,EAAA,KAAA,CAAA,KAAA,CAAA,CAAA,gEAyBC,EAAA,GAAA,CAAA,EAAA,EAAA,CAAA,EAAA,GAAA,CAAA,GAMA,EAAA,CAAA,EAAA,EAAA,MAAA,GAAA,GAOA,EAAA,CAAA,EAAA,EAAA,MAAA,EAAA,GAIG,EAAA,CAAA,EAAA,EAAA,WAAA,EAAA,IAAA,IAAA,6BAWA,CAAA,EAAA,EAAA,CAAA,CAAA,EAAA,EAAA,QAAA,EAAA,gEAKC,EAAA,OAAA,EAAA,EACA,EAAA,OAAA,CAAA,EAKA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,MAAA,CAAA,IAAA,8BAQQ,EAAA,MAAA,CAAA,GACA,EAAA,OAAA,CAAA,MAAA,CAAA,mBAJI,EAAA,GAAA,CAAA,GAAA,wCAWhB,GAAA,IAAA,EAAA,CACI,IAAA,EAAA,IAAA,EAAA,CAMA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,MAAA,CAAA,IAAA,CACI,IAAA,EAAA,CAAA,CAAA,EAAA,CACA,EAAA,EAAA,mCAII,EAAA,IAAA,CAAA,IAmBR,MAZG,SAAA,GAAA,EAAA,MAAA,QAKH,EAAA,EAAA,SAOA,KAiBD,GAAA,CAAA,YAAA,CAAA,CAAA,CAAA,CAAA,EAAA,EAAA,UAAA,EAAA,EAAA,kBAAA,iDAMS,IAAA,EAAA,EAAA,GAEA,IAAA,IAAA,CAAA,CAAA,GAEQ,CAAA,IAAA,GAEE,EAAA,QAAA,CAAA,EAAA,EA6BV,MAAA,CAAA,EAAA,EAAA,GAAA,EAAA,EAAA,CAAA,UAAA,EAAA,QAAA,EAAA,EAAA,OAAA,IAAA,CAAA,GAMgB,yGA7BZ,EAAA,OAAA,CAAA,GAAA,CAAA,IAEA,EAAA,GAAA,CAAA,MAAA,KACI,EAAA,GAAA,CAAA,EAAA,aAMJ,EAAA,OAAA,CAAA,IACI,GAAA,CAAA,EAAA,CAAA,CAAA,CACJ,aAII,EAAA,EAAA,OAAA,EAEA,GAAA,aAIR,wCAyBhB,ENlOM,EAAY,CAChB,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACD,CAEM,SAAS,EAAW,YAAE,CAAU,CAAmB,EACxD,GAAM,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GA+BzC,MAzBA,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KAER,IADI,EACE,EAAQ,YAAY,GAAG,GAGvB,EAAO,AAAC,IACZ,IAAM,EAAI,KAAK,GAAG,CAAC,EAAG,CAAC,EAAM,CAAA,CAAK,CAHnB,GAGuB,GAGtC,EADc,KAAK,KAAK,AACZ,CADa,AAAQ,IADnB,GAAG,CAIb,EAAI,EACN,CADS,CACD,cAL4B,QAKN,GAG9B,WAAW,KACT,GACF,EAAG,IAEP,EAGA,OADA,EAAQ,sBAAsB,GACvB,IAAM,qBAAqB,EACpC,EAAG,CAAC,EAAW,EAGb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAC,GAAG,CAAA,CACT,UAAU,+DACV,QAAS,CAAE,QAAS,CAAE,EACtB,KAAM,CACJ,QAAS,EACT,WAAY,CAAE,SAAU,IAAM,KAAM,QAAS,CAC/C,YAGA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAC,GAAG,CAAA,CACT,UAAU,wBACV,QAAS,CAAE,EAAG,CAAE,EAChB,QAAS,CAAE,EAAG,MAAO,EACrB,WAAY,CAAE,SAAU,GAAK,KAAM,QAAS,IAE9C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAC,GAAG,CAAA,CACT,UAAU,wBACV,QAAS,CAAE,EAAG,CAAE,EAChB,QAAS,CAAE,EAAG,KAAM,EACpB,WAAY,CAAE,SAAU,GAAK,KAAM,QAAS,OAIhD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kFAAyE,4BAGxF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAC,GAAG,CAAA,CACT,UAAU,wEACV,QAAS,CAAE,EAAG,CAAC,KAAM,OAAO,AAAC,EAC7B,WAAY,CACV,SAAU,IACV,KAAM,SACN,OAAQ,GACV,WAEC,EAAU,GAAG,CAAC,CAAC,EAAM,IACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAY,UAAU,sCACrB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,wBAAe,OAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,MAFC,WASlB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mHACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,2BACN,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,yBAAe,IAAE,EAAS,WAE5C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAC,GAAG,CAAA,CACT,UAAU,oCACV,QAAS,CAAE,MAAO,IAAK,EACvB,QAAS,CAAE,MAAO,CAAA,EAAG,EAAS,CAAC,CAAC,AAAC,EACjC,WAAY,CAAE,SAAU,GAAK,KAAM,QAAS,MAGhD,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,KAAK,SACL,QA/FO,CA+FE,IA9FnB,GACF,EA8FY,UAAU,6IAEV,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,8BACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,2CAAkC,oCAShE,CCnIO,SAAS,EAAU,UAAE,CAAQ,CAAiC,EACnE,GAAM,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEjD,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UACE,CAAC,GACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAW,WAAY,IAAM,GAAgB,OAIlD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gDAEb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAC,MAAM,CAAA,CACZ,UAAU,sFACV,QAAS,CAAE,EAAG,CAAC,GAAI,QAAS,CAAE,EAC9B,QAAS,CAAE,EAAG,EAAG,QAAS,CAAE,EAC5B,WAAY,CAAE,SAAU,GAAK,KAAM,QAAS,WAE5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iHACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CAAoC,wBAGnD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6DACZ,CACC,CAAE,MAAO,SAAU,KAAM,GAAI,EAC7B,CAAE,MAAO,SAAU,KAAM,SAAU,EACnC,CAAE,MAAO,UAAW,KAAM,UAAW,EACtC,CAAC,GAAG,CAAC,AAAC,GACL,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAEC,KAAM,EAAK,IAAI,CACf,UAAU,iFAEV,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,iDACd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+FAAsF,MAGtG,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oCACb,EAAK,KAAK,GAEb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+FAAsF,UAXnG,EAAK,KAAK,UAsBzB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,wGACb,IAIH,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,gDAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mIACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2EACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yBAAgB,YAChC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8BAAqB,4BAIvC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2EACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oBAChB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yBAAgB,YAChC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,6BAAoB,oBAEtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4DACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,+CAG/B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4DAAmD,uEAGlE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+FACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,iCACN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0CAAiC,MACjD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CACC,KAAK,WACL,UAAU,4CACX,YAGD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAK,OAAO,UAAU,4CAAmC,2BAW9E","ignoreList":[2,3,4,5,6]}